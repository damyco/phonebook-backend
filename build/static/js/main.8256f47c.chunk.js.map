{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Filter","searchName","handleSearchChange","value","onChange","PersonForm","addName","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Persons","persons","deletePerson","map","person","name","number","onClick","id","Notification","message","className","baseUrl","axios","get","then","response","data","newObject","post","put","delete","App","useState","setPersons","setNewName","setNewNumber","setSearchName","successMessage","setSuccessMessage","errorMessage","setErrorMessage","useEffect","personService","initialPersons","regexp","RegExp","personsToShow","filter","test","event","target","preventDefault","some","window","confirm","personFound","find","p","changedPerson","returnedPerson","catch","error","console","log","setTimeout","concat","length","personToDelete","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8256f47c.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Filter = ({ searchName, handleSearchChange }) => {\r\n  return (\r\n    <div>\r\n      filter shown with\r\n      <input value={searchName} onChange={handleSearchChange} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from 'react';\r\n\r\nconst PersonForm = ({\r\n  addName,\r\n  newName,\r\n  handleNameChange,\r\n  newNumber,\r\n  handleNumberChange,\r\n}) => {\r\n  return (\r\n    <div>\r\n      <form onSubmit={addName}>\r\n        <div>\r\n          name: <input value={newName} onChange={handleNameChange} />\r\n        </div>\r\n        <div>\r\n          number: <input value={newNumber} onChange={handleNumberChange} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from 'react';\r\n\r\nconst Persons = ({ persons, deletePerson }) => {\r\n  return persons.map((person) => (\r\n    <p key={person.id}>\r\n      {person.name} {person.number}\r\n      <button onClick={() => deletePerson(person.id)}>delete</button>\r\n    </p>\r\n  ));\r\n};\r\n\r\nexport default Persons;\r\n","const Notification = ({ message, className }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n\r\n  return <div className={className}>{message}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import axios from 'axios';\r\nconst baseUrl = 'http://localhost:3001/api/persons';\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst update = (person, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${person.id}`, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst remove = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nexport default { getAll, create, update, remove };\r\n","import React, { useState, useEffect } from 'react';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport Notification from './components/Notification';\nimport personService from './services/persons';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [searchName, setSearchName] = useState('');\n  const [successMessage, setSuccessMessage] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  useEffect(() => {\n    personService.getAll().then((initialPersons) => setPersons(initialPersons));\n  }, []);\n\n  const addName = (event) => {\n    event.preventDefault();\n    // check if the name already exists, return true if found\n    const nameCheck = persons.some((person) => person.name === newName);\n\n    if (nameCheck) {\n      const confirmNumber = window.confirm(\n        ` ${newName} is already added to the phone book, replace old number with a new one?`\n      );\n      if (confirmNumber) {\n        const personFound = persons.find((p) => p.name === newName);\n        const changedPerson = { ...personFound, number: newNumber };\n\n        personService\n          .update(personFound, changedPerson)\n          .then((returnedPerson) => {\n            setPersons(\n              persons.map((person) => {\n                return person.name !== personFound.name\n                  ? person\n                  : returnedPerson;\n              })\n            );\n          })\n          .catch((error) => {\n            if (error.response) {\n              console.log(error.response.data);\n              setErrorMessage(error.response.data.message);\n            }\n            setErrorMessage('This entry is no longer on the server.');\n            personService.getAll().then((persons) => setPersons(persons));\n\n            setTimeout(() => {\n              setErrorMessage(null);\n            }, 5000);\n          });\n      }\n    } else {\n      const nameObject = {\n        name: newName,\n        number: newNumber,\n      };\n      personService\n        .create(nameObject)\n        .then((returnedPerson) => {\n          setPersons(persons.concat(returnedPerson));\n          setSuccessMessage(`Added ${returnedPerson.name}`);\n          setTimeout(() => {\n            setSuccessMessage(null);\n          }, 3000);\n          setNewName('');\n          setNewNumber('');\n        })\n        .catch((error) => {\n          console.log(error.response.data);\n          setErrorMessage(error.response.data.error);\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        });\n    }\n  };\n\n  const deletePerson = (id) => {\n    const personToDelete = persons.find((person) => person.id === id);\n    const confirmDelete = window.confirm(\n      `Delete entry: ${personToDelete.name} ? `\n    );\n    if (confirmDelete) {\n      personService\n        .remove(id)\n        .then((returnedPerson) => {\n          setPersons(persons.filter((p) => p.id !== id));\n          setSearchName('');\n        })\n        .catch((error) => {\n          console.log(error);\n          setErrorMessage(`This entry is no longer on the server`, 'error');\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        });\n    }\n  };\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleSearchChange = (event) => {\n    setSearchName(event.target.value);\n  };\n\n  const regexp = new RegExp(searchName, 'i');\n  const personsToShow = persons.filter((person) => regexp.test(person.name));\n\n  return (\n    <div>\n      <h2>Phone book</h2>\n      <Notification className=\"success\" message={successMessage} />\n      <Notification className=\"error\" message={errorMessage} />\n\n      <Filter searchName={searchName} handleSearchChange={handleSearchChange} />\n\n      <h3>Add a new</h3>\n      <PersonForm\n        newName={newName}\n        newNumber={newNumber}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        addName={addName}\n      />\n\n      <h3>Numbers</h3>\n\n      <div>\n        {personsToShow.length > 0 ? (\n          <Persons persons={personsToShow} deletePerson={deletePerson} />\n        ) : (\n          <p>Nothing to show</p>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom'\nimport App from './App.js'\nimport './index.css'\n\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}